import{j as e,a as r}from"./ui.DDQN6UUz.js";import{r as a}from"./vendor.CJDJhWJD.js";import{k as s,c as t,f as i,B as l,j as d,I as n,l as o,m as c,L as m,D as x,n as p,b as h,d as u,e as y}from"./index.DUqZId71.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=s("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),v=s("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),j=s("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),f=a.forwardRef(({className:r,...a},s)=>e.jsx("div",{ref:s,className:t("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a}));
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */f.displayName="Card";const k=a.forwardRef(({className:r,...a},s)=>e.jsx("div",{ref:s,className:t("flex flex-col space-y-1.5 p-6",r),...a}));k.displayName="CardHeader";const N=a.forwardRef(({className:r,...a},s)=>e.jsx("h3",{ref:s,className:t("text-2xl font-semibold leading-none tracking-tight",r),...a}));N.displayName="CardTitle";a.forwardRef(({className:r,...a},s)=>e.jsx("p",{ref:s,className:t("text-sm text-muted-foreground",r),...a})).displayName="CardDescription";const b=a.forwardRef(({className:r,...a},s)=>e.jsx("div",{ref:s,className:t("p-6 pt-0",r),...a}));b.displayName="CardContent";a.forwardRef(({className:r,...a},s)=>e.jsx("div",{ref:s,className:t("flex items-center p-6 pt-0",r),...a})).displayName="CardFooter";var w="horizontal",C=["horizontal","vertical"],M=a.forwardRef((a,s)=>{const{decorative:t,orientation:i=w,...l}=a,d=function(e){return C.includes(e)}(i)?i:w,n=t?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"};return e.jsx(r.div,{"data-orientation":d,...n,...l,ref:s})});M.displayName="Separator";var S=M;const L=a.forwardRef(({className:r,orientation:a="horizontal",decorative:s=!0,...i},l)=>e.jsx(S,{ref:l,decorative:s,orientation:a,className:t("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",r),...i}));L.displayName=S.displayName;const z=({onToggleMode:r})=>{const[s,t]=a.useState(""),[o,c]=a.useState(""),[m,x]=a.useState(!1),[p,h]=a.useState(null),{signIn:u,signInWithGoogle:y,isLoading:g}=i();return e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),s.trim()&&o.trim())if(s.includes("@")){h(null),x(!0);try{console.log("Attempting login with email:",s),await u(s.trim(),o),console.log("Login successful")}catch(r){console.error("Login error:",r)}finally{x(!1)}}else h("אנא הכנס כתובת אימייל תקינה");else h("אנא מלא את כל השדות")},className:"space-y-4",children:[e.jsxs(l,{type:"button",variant:"outline",onClick:async()=>{h(null);try{console.log("Attempting Google login"),await y(),console.log("Google login initiated")}catch(e){console.error("Google login error:",e)}},className:"w-full flex items-center justify-center space-x-2 space-x-reverse",disabled:g||m,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),e.jsx("span",{children:"התחבר עם Google"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(L,{})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background dark:bg-slate-800 px-2 text-muted-foreground",children:"או התחבר עם אימייל"})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"email",children:"אימייל"}),e.jsx(n,{id:"email",type:"email",value:s,onChange:e=>t(e.target.value),placeholder:"you@example.com",required:!0,disabled:m||g})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"password",children:"סיסמה"}),e.jsx(n,{id:"password",type:"password",value:o,onChange:e=>c(e.target.value),placeholder:"********",required:!0,disabled:m||g})]}),p&&e.jsx("div",{className:"text-destructive text-sm",children:p}),e.jsx(l,{type:"submit",className:"w-full bg-primary-500 hover:bg-primary-600 dark:bg-primary-700 dark:hover:bg-primary-600",disabled:m||g,children:m?"מתחבר...":"התחבר"}),e.jsxs("div",{className:"text-center text-sm",children:["אין לך חשבון?"," ",e.jsx("button",{type:"button",onClick:r,className:"text-primary-500 hover:text-primary-600 dark:text-primary-400 dark:hover:text-primary-300",disabled:m||g,children:"הירשם עכשיו"})]})]})},F=({onToggleMode:r})=>{const[s,t]=a.useState(""),[o,c]=a.useState(""),[m,x]=a.useState(""),[p,h]=a.useState(""),[u,y]=a.useState(!1),[g,v]=a.useState(null),j=a.useRef(null),f=a.useRef(null),{signUp:k,isLoading:N}=i();a.useEffect(()=>{const e=j.current,r=f.current;if(e&&r){const a=()=>{setTimeout(()=>{e.value&&!r.value&&h(e.value)},100)},s=()=>{setTimeout(()=>{e.value&&e.value!==o&&(c(e.value),r.value||h(e.value))},100)};return e.addEventListener("input",a),e.addEventListener("input",s),()=>{e.removeEventListener("input",a),e.removeEventListener("input",s)}}},[o]);return e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),v(null);if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))if(o===p)if(o.length<6)v("הסיסמה חייבת להכיל לפחות 6 תווים");else if(m.trim()){y(!0);try{console.log("Attempting signup with:",{email:s,username:m}),await k(s,o,m.trim()),console.log("Signup successful")}catch(r){console.error("Signup error:",r)}finally{y(!1)}}else v("שם המשתמש חובה");else v("הסיסמאות אינן תואמות");else v("כתובת האימייל אינה תקינה")},className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"username",children:"שם משתמש"}),e.jsx(n,{id:"username",type:"text",value:m,onChange:e=>x(e.target.value),placeholder:"שם משתמש",required:!0,disabled:u||N})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"register-email",children:"אימייל"}),e.jsx(n,{id:"register-email",type:"email",value:s,onChange:e=>t(e.target.value),placeholder:"you@example.com",required:!0,disabled:u||N})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"register-password",children:"סיסמה"}),e.jsx(n,{ref:j,id:"register-password",type:"password",value:o,onChange:e=>c(e.target.value),placeholder:"********",required:!0,minLength:6,disabled:u||N})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"confirm-password",children:"אימות סיסמה"}),e.jsx(n,{ref:f,id:"confirm-password",type:"password",value:p,onChange:e=>h(e.target.value),placeholder:"********",required:!0,disabled:u||N})]}),g&&e.jsx("div",{className:"text-destructive text-sm",children:g}),e.jsx(l,{type:"submit",className:"w-full bg-primary-500 hover:bg-primary-600 dark:bg-primary-700 dark:hover:bg-primary-600",disabled:u||N,children:u?"נרשם...":"הירשם"}),e.jsxs("div",{className:"text-center text-sm",children:["כבר יש לך חשבון?"," ",e.jsx("button",{type:"button",onClick:r,className:"text-primary-500 hover:text-primary-600 dark:text-primary-400 dark:hover:text-primary-300",disabled:u||N,children:"התחבר"})]})]})},R=()=>{const{currentUser:r,signOut:s}=i(),{theme:t,setTheme:d}=o(),[n,f]=a.useState("login"),[k,N]=a.useState(!1),{deferredPrompt:b}=c();return e.jsx("header",{className:"bg-primary-50 dark:bg-slate-800 border-b border-primary-200 dark:border-slate-700 p-4 shadow-sm",children:e.jsxs("div",{className:"container mx-auto flex flex-wrap items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h1",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400 font-heebo",children:e.jsx(m,{to:"/",children:"סמנטעל +"})})}),e.jsx("div",{className:"md:hidden",children:e.jsxs(l,{variant:"ghost",onClick:()=>N(!k),children:[e.jsx("span",{className:"sr-only",children:"תפריט"}),e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:k?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]})}),e.jsxs("nav",{className:(k?"flex":"hidden")+" md:flex flex-col md:flex-row w-full md:w-auto md:items-center md:justify-between mt-4 md:mt-0 space-y-2 md:space-y-0 md:space-x-4 md:space-x-reverse",children:[e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-4 md:space-x-reverse",children:[e.jsx(m,{to:"/",className:"text-primary-700 dark:text-primary-300 hover:text-primary-800 dark:hover:text-primary-200 px-3 py-2 rounded-md",onClick:()=>N(!1),children:"משחק"}),e.jsx(m,{to:"/leaderboard",className:"text-primary-700 dark:text-primary-300 hover:text-primary-800 dark:hover:text-primary-200 px-3 py-2 rounded-md",onClick:()=>N(!1),children:"טבלת המובילים"}),e.jsx(m,{to:"/about",className:"text-primary-700 dark:text-primary-300 hover:text-primary-800 dark:hover:text-primary-200 px-3 py-2 rounded-md",onClick:()=>N(!1),children:"אודות"}),e.jsx(m,{to:"/history",className:"text-primary-700 dark:text-primary-300 hover:text-primary-800 dark:hover:text-primary-200 px-3 py-2 rounded-md",onClick:()=>N(!1),children:"היסטוריה"}),b&&e.jsxs("button",{onClick:async()=>{b&&(b.prompt(),await b.userChoice)},className:"flex items-center text-primary-700 dark:text-primary-300 hover:text-primary-800 dark:hover:text-primary-200 px-3 py-2 rounded-md gap-1",style:{direction:"rtl"},children:[e.jsx(g,{className:"w-4 h-4 ml-1"}),"התקן"]}),r?.isAdmin&&e.jsx(m,{to:"/admin",className:"text-primary-700 dark:text-primary-300 hover:text-primary-800 dark:hover:text-primary-200 px-3 py-2 rounded-md",onClick:()=>N(!1),children:"ניהול"})]}),e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx(l,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:()=>{d("light"===t.name?{name:"dark",label:"כהה"}:{name:"light",label:"בהיר"})},children:"light"===t.name?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:"מצב כהה"})]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{children:"מצב בהיר"})]})}),r?e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx(m,{to:"/profile",className:"text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-200 px-3 py-2 rounded-md",onClick:()=>N(!1),children:r.username}),e.jsx(l,{variant:"outline",className:"border-primary-300 text-primary-700 dark:border-primary-700 dark:text-primary-300 hover:bg-primary-100 dark:hover:bg-primary-900",onClick:()=>{s(),N(!1)},children:"התנתק"})]}):e.jsxs(x,{children:[e.jsx(p,{asChild:!0,children:e.jsx(l,{className:"bg-primary-500 hover:bg-primary-600 text-white dark:bg-primary-700 dark:hover:bg-primary-600",onClick:()=>N(!1),children:"התחברות"})}),e.jsxs(h,{className:"sm:max-w-md",children:[e.jsx(u,{children:e.jsx(y,{className:"text-center text-2xl font-heebo",children:"login"===n?"התחברות":"הרשמה"})}),"login"===n?e.jsx(z,{onToggleMode:()=>f("register")}):e.jsx(F,{onToggleMode:()=>f("login")})]})]})]})]})]})})};export{f as C,R as H,z as L,F as R,b as a,k as b,N as c};
