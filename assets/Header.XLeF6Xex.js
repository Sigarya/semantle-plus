import{j as e,O as a,i as s,k as r,l as t,m as l,n as i,o as d,p as o,a as n}from"./ui.DDQN6UUz.js";import{r as c}from"./vendor.CJDJhWJD.js";import{g as m,c as p,X as x,a as u,b as h,h as f,L as g}from"./index.D3eYV1D4.js";import{B as y}from"./button.Bx3Xy4uE.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=m("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),j=m("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),N=c.forwardRef(({className:a,...s},r)=>e.jsx("div",{ref:r,className:p("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s}));
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */N.displayName="Card";const b=c.forwardRef(({className:a,...s},r)=>e.jsx("div",{ref:r,className:p("flex flex-col space-y-1.5 p-6",a),...s}));b.displayName="CardHeader";const k=c.forwardRef(({className:a,...s},r)=>e.jsx("h3",{ref:r,className:p("text-2xl font-semibold leading-none tracking-tight",a),...s}));k.displayName="CardTitle";c.forwardRef(({className:a,...s},r)=>e.jsx("p",{ref:r,className:p("text-sm text-muted-foreground",a),...s})).displayName="CardDescription";const w=c.forwardRef(({className:a,...s},r)=>e.jsx("div",{ref:r,className:p("p-6 pt-0",a),...s}));w.displayName="CardContent";c.forwardRef(({className:a,...s},r)=>e.jsx("div",{ref:r,className:p("flex items-center p-6 pt-0",a),...s})).displayName="CardFooter";const C=d,M=o,R=i,S=c.forwardRef(({className:s,...r},t)=>e.jsx(a,{ref:t,className:p("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r}));S.displayName=a.displayName;const L=c.forwardRef(({className:a,children:t,...l},i)=>e.jsxs(R,{children:[e.jsx(S,{}),e.jsxs(s,{ref:i,className:p("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[t,e.jsxs(r,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(x,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));L.displayName=s.displayName;const z=({className:a,...s})=>e.jsx("div",{className:p("flex flex-col space-y-1.5 text-center sm:text-left",a),...s});z.displayName="DialogHeader";const F=c.forwardRef(({className:a,...s},r)=>e.jsx(t,{ref:r,className:p("text-lg font-semibold leading-none tracking-tight",a),...s}));F.displayName=t.displayName;c.forwardRef(({className:a,...s},r)=>e.jsx(l,{ref:r,className:p("text-sm text-muted-foreground",a),...s})).displayName=l.displayName;const D=c.forwardRef(({className:a,type:s,...r},t)=>e.jsx("input",{type:s,className:p("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r}));D.displayName="Input";var T=c.forwardRef((a,s)=>e.jsx(n.label,{...a,ref:s,onMouseDown:e=>{e.target.closest("button, input, select, textarea")||(a.onMouseDown?.(e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));T.displayName="Label";var q=T;const A=u("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),E=c.forwardRef(({className:a,...s},r)=>e.jsx(q,{ref:r,className:p(A(),a),...s}));E.displayName=q.displayName;var H="horizontal",B=["horizontal","vertical"],G=c.forwardRef((a,s)=>{const{decorative:r,orientation:t=H,...l}=a,i=function(e){return B.includes(e)}(t)?t:H,d=r?{role:"none"}:{"aria-orientation":"vertical"===i?i:void 0,role:"separator"};return e.jsx(n.div,{"data-orientation":i,...d,...l,ref:s})});G.displayName="Separator";var I=G;const W=c.forwardRef(({className:a,orientation:s="horizontal",decorative:r=!0,...t},l)=>e.jsx(I,{ref:l,decorative:r,orientation:s,className:p("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...t}));W.displayName=I.displayName;const O=({onToggleMode:a})=>{const[s,r]=c.useState(""),[t,l]=c.useState(""),[i,d]=c.useState(!1),[o,n]=c.useState(null),{signIn:m,signInWithGoogle:p,isLoading:x}=h();return e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),s.trim()&&t.trim())if(s.includes("@")){n(null),d(!0);try{console.log("Attempting login with email:",s),await m(s.trim(),t),console.log("Login successful")}catch(a){console.error("Login error:",a)}finally{d(!1)}}else n("אנא הכנס כתובת אימייל תקינה");else n("אנא מלא את כל השדות")},className:"space-y-4",children:[e.jsxs(y,{type:"button",variant:"outline",onClick:async()=>{n(null);try{console.log("Attempting Google login"),await p(),console.log("Google login initiated")}catch(e){console.error("Google login error:",e)}},className:"w-full flex items-center justify-center space-x-2 space-x-reverse",disabled:x||i,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),e.jsx("span",{children:"התחבר עם Google"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(W,{})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background dark:bg-slate-800 px-2 text-muted-foreground",children:"או התחבר עם אימייל"})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(E,{htmlFor:"email",children:"אימייל"}),e.jsx(D,{id:"email",type:"email",value:s,onChange:e=>r(e.target.value),placeholder:"you@example.com",required:!0,disabled:i||x})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(E,{htmlFor:"password",children:"סיסמה"}),e.jsx(D,{id:"password",type:"password",value:t,onChange:e=>l(e.target.value),placeholder:"********",required:!0,disabled:i||x})]}),o&&e.jsx("div",{className:"text-destructive text-sm",children:o}),e.jsx(y,{type:"submit",className:"w-full bg-primary-500 hover:bg-primary-600 dark:bg-primary-700 dark:hover:bg-primary-600",disabled:i||x,children:i?"מתחבר...":"התחבר"}),e.jsxs("div",{className:"text-center text-sm",children:["אין לך חשבון?"," ",e.jsx("button",{type:"button",onClick:a,className:"text-primary-500 hover:text-primary-600 dark:text-primary-400 dark:hover:text-primary-300",disabled:i||x,children:"הירשם עכשיו"})]})]})},U=({onToggleMode:a})=>{const[s,r]=c.useState(""),[t,l]=c.useState(""),[i,d]=c.useState(""),[o,n]=c.useState(""),[m,p]=c.useState(!1),[x,u]=c.useState(null),f=c.useRef(null),g=c.useRef(null),{signUp:v,isLoading:j}=h();c.useEffect(()=>{const e=f.current,a=g.current;if(e&&a){const s=()=>{setTimeout(()=>{e.value&&!a.value&&n(e.value)},100)},r=()=>{setTimeout(()=>{e.value&&e.value!==t&&(l(e.value),a.value||n(e.value))},100)};return e.addEventListener("input",s),e.addEventListener("input",r),()=>{e.removeEventListener("input",s),e.removeEventListener("input",r)}}},[t]);return e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),u(null);if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))if(t===o)if(t.length<6)u("הסיסמה חייבת להכיל לפחות 6 תווים");else if(i.trim()){p(!0);try{console.log("Attempting signup with:",{email:s,username:i}),await v(s,t,i.trim()),console.log("Signup successful")}catch(a){console.error("Signup error:",a)}finally{p(!1)}}else u("שם המשתמש חובה");else u("הסיסמאות אינן תואמות");else u("כתובת האימייל אינה תקינה")},className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(E,{htmlFor:"username",children:"שם משתמש"}),e.jsx(D,{id:"username",type:"text",value:i,onChange:e=>d(e.target.value),placeholder:"שם משתמש",required:!0,disabled:m||j})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(E,{htmlFor:"register-email",children:"אימייל"}),e.jsx(D,{id:"register-email",type:"email",value:s,onChange:e=>r(e.target.value),placeholder:"you@example.com",required:!0,disabled:m||j})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(E,{htmlFor:"register-password",children:"סיסמה"}),e.jsx(D,{ref:f,id:"register-password",type:"password",value:t,onChange:e=>l(e.target.value),placeholder:"********",required:!0,minLength:6,disabled:m||j})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(E,{htmlFor:"confirm-password",children:"אימות סיסמה"}),e.jsx(D,{ref:g,id:"confirm-password",type:"password",value:o,onChange:e=>n(e.target.value),placeholder:"********",required:!0,disabled:m||j})]}),x&&e.jsx("div",{className:"text-destructive text-sm",children:x}),e.jsx(y,{type:"submit",className:"w-full bg-primary-500 hover:bg-primary-600 dark:bg-primary-700 dark:hover:bg-primary-600",disabled:m||j,children:m?"נרשם...":"הירשם"}),e.jsxs("div",{className:"text-center text-sm",children:["כבר יש לך חשבון?"," ",e.jsx("button",{type:"button",onClick:a,className:"text-primary-500 hover:text-primary-600 dark:text-primary-400 dark:hover:text-primary-300",disabled:m||j,children:"התחבר"})]})]})},P=()=>{const{currentUser:a,signOut:s}=h(),{theme:r,setTheme:t}=f(),[l,i]=c.useState("login"),[d,o]=c.useState(!1);return e.jsx("header",{className:"bg-primary-50 dark:bg-slate-800 border-b border-primary-200 dark:border-slate-700 p-4 shadow-sm",children:e.jsxs("div",{className:"container mx-auto flex flex-wrap items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h1",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400 font-heebo",children:e.jsx(g,{to:"/",children:"סמנטעל +"})})}),e.jsx("div",{className:"md:hidden",children:e.jsxs(y,{variant:"ghost",onClick:()=>o(!d),children:[e.jsx("span",{className:"sr-only",children:"תפריט"}),e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]})}),e.jsxs("nav",{className:(d?"flex":"hidden")+" md:flex flex-col md:flex-row w-full md:w-auto md:items-center md:justify-between mt-4 md:mt-0 space-y-2 md:space-y-0 md:space-x-4 md:space-x-reverse",children:[e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-4 md:space-x-reverse",children:[e.jsx(g,{to:"/",className:"text-primary-700 dark:text-primary-300 hover:text-primary-800 dark:hover:text-primary-200 px-3 py-2 rounded-md",onClick:()=>o(!1),children:"משחק"}),e.jsx(g,{to:"/leaderboard",className:"text-primary-700 dark:text-primary-300 hover:text-primary-800 dark:hover:text-primary-200 px-3 py-2 rounded-md",onClick:()=>o(!1),children:"טבלת המובילים"}),e.jsx(g,{to:"/about",className:"text-primary-700 dark:text-primary-300 hover:text-primary-800 dark:hover:text-primary-200 px-3 py-2 rounded-md",onClick:()=>o(!1),children:"אודות"}),e.jsx(g,{to:"/history",className:"text-primary-700 dark:text-primary-300 hover:text-primary-800 dark:hover:text-primary-200 px-3 py-2 rounded-md",onClick:()=>o(!1),children:"היסטוריה"}),a?.isAdmin&&e.jsx(g,{to:"/admin",className:"text-primary-700 dark:text-primary-300 hover:text-primary-800 dark:hover:text-primary-200 px-3 py-2 rounded-md",onClick:()=>o(!1),children:"ניהול"})]}),e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx(y,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:()=>{t("light"===r.name?{name:"dark",label:"כהה"}:{name:"light",label:"בהיר"})},children:"light"===r.name?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:"מצב כהה"})]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{children:"מצב בהיר"})]})}),a?e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx(g,{to:"/profile",className:"text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-200 px-3 py-2 rounded-md",onClick:()=>o(!1),children:a.username}),e.jsx(y,{variant:"outline",className:"border-primary-300 text-primary-700 dark:border-primary-700 dark:text-primary-300 hover:bg-primary-100 dark:hover:bg-primary-900",onClick:()=>{s(),o(!1)},children:"התנתק"})]}):e.jsxs(C,{children:[e.jsx(M,{asChild:!0,children:e.jsx(y,{className:"bg-primary-500 hover:bg-primary-600 text-white dark:bg-primary-700 dark:hover:bg-primary-600",onClick:()=>o(!1),children:"התחברות"})}),e.jsxs(L,{className:"sm:max-w-md",children:[e.jsx(z,{children:e.jsx(F,{className:"text-center text-2xl font-heebo",children:"login"===l?"התחברות":"הרשמה"})}),"login"===l?e.jsx(O,{onToggleMode:()=>i("register")}):e.jsx(U,{onToggleMode:()=>i("login")})]})]})]})]})]})})};export{N as C,C as D,P as H,D as I,O as L,U as R,L as a,z as b,F as c,w as d,b as e,k as f,E as g};
